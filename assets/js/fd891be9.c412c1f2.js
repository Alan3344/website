"use strict";(self.webpackChunkflet_dev=self.webpackChunkflet_dev||[]).push([[522],{3905:function(e,t,n){n.d(t,{Zo:function(){return s},kt:function(){return f}});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var u=a.createContext({}),d=function(e){var t=a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},s=function(e){var t=d(e.components);return a.createElement(u.Provider,{value:t},e.children)},c="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,l=e.originalType,u=e.parentName,s=r(e,["components","mdxType","originalType","parentName"]),c=d(n),m=o,f=c["".concat(u,".").concat(m)]||c[m]||p[m]||l;return n?a.createElement(f,i(i({ref:t},s),{},{components:n})):a.createElement(f,i({ref:t},s))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var l=n.length,i=new Array(l);i[0]=m;var r={};for(var u in t)hasOwnProperty.call(t,u)&&(r[u]=t[u]);r.originalType=e,r[c]="string"==typeof e?e:o,i[1]=r;for(var d=2;d<l;d++)i[d]=n[d];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},5162:function(e,t,n){n.d(t,{Z:function(){return i}});var a=n(7294),o=n(6010),l="tabItem_Ymn6";function i(e){var t=e.children,n=e.hidden,i=e.className;return a.createElement("div",{role:"tabpanel",className:(0,o.Z)(l,i),hidden:n},t)}},4866:function(e,t,n){n.d(t,{Z:function(){return w}});var a=n(7462),o=n(7294),l=n(6010),i=n(2466),r=n(6550),u=n(1980),d=n(7392),s=n(12);function c(e){return function(e){var t,n;return null!=(t=null==(n=o.Children.map(e,(function(e){if(!e||(0,o.isValidElement)(e)&&(t=e.props)&&"object"==typeof t&&"value"in t)return e;var t;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})))?void 0:n.filter(Boolean))?t:[]}(e).map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes,default:t.default}}))}function p(e){var t=e.values,n=e.children;return(0,o.useMemo)((function(){var e=null!=t?t:c(n);return function(e){var t=(0,d.l)(e,(function(e,t){return e.value===t.value}));if(t.length>0)throw new Error('Docusaurus error: Duplicate values "'+t.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[t,n])}function m(e){var t=e.value;return e.tabValues.some((function(e){return e.value===t}))}function f(e){var t=e.queryString,n=void 0!==t&&t,a=e.groupId,l=(0,r.k6)(),i=function(e){var t=e.queryString,n=void 0!==t&&t,a=e.groupId;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=a?a:null}({queryString:n,groupId:a});return[(0,u._X)(i),(0,o.useCallback)((function(e){if(i){var t=new URLSearchParams(l.location.search);t.set(i,e),l.replace(Object.assign({},l.location,{search:t.toString()}))}}),[i,l])]}function h(e){var t,n,a,l,i=e.defaultValue,r=e.queryString,u=void 0!==r&&r,d=e.groupId,c=p(e),h=(0,o.useState)((function(){return function(e){var t,n=e.defaultValue,a=e.tabValues;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!m({value:n,tabValues:a}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+n+'" but none of its children has the corresponding value. Available values are: '+a.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return n}var o=null!=(t=a.find((function(e){return e.default})))?t:a[0];if(!o)throw new Error("Unexpected error: 0 tabValues");return o.value}({defaultValue:i,tabValues:c})})),v=h[0],k=h[1],b=f({queryString:u,groupId:d}),g=b[0],y=b[1],_=(t=function(e){return e?"docusaurus.tab."+e:null}({groupId:d}.groupId),n=(0,s.Nk)(t),a=n[0],l=n[1],[a,(0,o.useCallback)((function(e){t&&l.set(e)}),[t,l])]),w=_[0],N=_[1],E=function(){var e=null!=g?g:w;return m({value:e,tabValues:c})?e:null}();return(0,o.useLayoutEffect)((function(){E&&k(E)}),[E]),{selectedValue:v,selectValue:(0,o.useCallback)((function(e){if(!m({value:e,tabValues:c}))throw new Error("Can't select invalid tab value="+e);k(e),y(e),N(e)}),[y,N,c]),tabValues:c}}var v=n(2389),k="tabList__CuJ",b="tabItem_LNqP";function g(e){var t=e.className,n=e.block,r=e.selectedValue,u=e.selectValue,d=e.tabValues,s=[],c=(0,i.o5)().blockElementScrollPositionUntilNextRender,p=function(e){var t=e.currentTarget,n=s.indexOf(t),a=d[n].value;a!==r&&(c(t),u(a))},m=function(e){var t,n=null;switch(e.key){case"Enter":p(e);break;case"ArrowRight":var a,o=s.indexOf(e.currentTarget)+1;n=null!=(a=s[o])?a:s[0];break;case"ArrowLeft":var l,i=s.indexOf(e.currentTarget)-1;n=null!=(l=s[i])?l:s[s.length-1]}null==(t=n)||t.focus()};return o.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.Z)("tabs",{"tabs--block":n},t)},d.map((function(e){var t=e.value,n=e.label,i=e.attributes;return o.createElement("li",(0,a.Z)({role:"tab",tabIndex:r===t?0:-1,"aria-selected":r===t,key:t,ref:function(e){return s.push(e)},onKeyDown:m,onClick:p},i,{className:(0,l.Z)("tabs__item",b,null==i?void 0:i.className,{"tabs__item--active":r===t})}),null!=n?n:t)})))}function y(e){var t=e.lazy,n=e.children,a=e.selectedValue,l=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){var i=l.find((function(e){return e.props.value===a}));return i?(0,o.cloneElement)(i,{className:"margin-top--md"}):null}return o.createElement("div",{className:"margin-top--md"},l.map((function(e,t){return(0,o.cloneElement)(e,{key:t,hidden:e.props.value!==a})})))}function _(e){var t=h(e);return o.createElement("div",{className:(0,l.Z)("tabs-container",k)},o.createElement(g,(0,a.Z)({},e,t)),o.createElement(y,(0,a.Z)({},e,t)))}function w(e){var t=(0,v.Z)();return o.createElement(_,(0,a.Z)({key:String(t)},e))}},8009:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return s},default:function(){return h},frontMatter:function(){return d},metadata:function(){return c},toc:function(){return m}});var a=n(7462),o=n(3366),l=(n(7294),n(3905)),i=n(4866),r=n(5162),u=["components"],d={title:"Audio",sidebar_label:"Audio",slug:"audio"},s=void 0,c={unversionedId:"controls/audio",id:"controls/audio",title:"Audio",description:"A control to simultaneously play multiple audio files. Works on macOS, Linux, Windows, iOS, Android and web.",source:"@site/docs/controls/audio.md",sourceDirName:"controls",slug:"/controls/audio",permalink:"/docs/controls/audio",draft:!1,editUrl:"https://github.com/flet-dev/website/edit/main/docs/controls/audio.md",tags:[],version:"current",frontMatter:{title:"Audio",sidebar_label:"Audio",slug:"audio"},sidebar:"docs",previous:{title:"Utility",permalink:"/docs/controls/utility"},next:{title:"Draggable",permalink:"/docs/controls/draggable"}},p={},m=[{value:"Examples",id:"examples",level:2},{value:"Autoplay audio",id:"autoplay-audio",level:3},{value:"Audio with playback controls",id:"audio-with-playback-controls",level:3},{value:"Properties",id:"properties",level:2},{value:"<code>autoplay</code>",id:"autoplay",level:3},{value:"<code>balance</code>",id:"balance",level:3},{value:"<code>get_current_position()</code>",id:"get_current_position",level:3},{value:"<code>get_duration()</code>",id:"get_duration",level:3},{value:"<code>playback_rate</code>",id:"playback_rate",level:3},{value:"<code>release_mode</code>",id:"release_mode",level:3},{value:"<code>src</code>",id:"src",level:3},{value:"<code>src_base64</code>",id:"src_base64",level:3},{value:"Methods",id:"methods",level:2},{value:"<code>pause()</code>",id:"pause",level:3},{value:"<code>play()</code>",id:"play",level:3},{value:"<code>release()</code>",id:"release",level:3},{value:"<code>resume()</code>",id:"resume",level:3},{value:"<code>seek()</code>",id:"seek",level:3},{value:"<code>volume</code>",id:"volume",level:3},{value:"Events",id:"events",level:2},{value:"<code>on_duration_changed</code>",id:"on_duration_changed",level:3},{value:"<code>on_loaded</code>",id:"on_loaded",level:3},{value:"<code>on_position_changed</code>",id:"on_position_changed",level:3},{value:"<code>on_seek_complete</code>",id:"on_seek_complete",level:3},{value:"<code>on_state_changed</code>",id:"on_state_changed",level:3}],f={toc:m};function h(e){var t=e.components,n=(0,o.Z)(e,u);return(0,l.kt)("wrapper",(0,a.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"A control to simultaneously play multiple audio files. Works on macOS, Linux, Windows, iOS, Android and web.\nBased on ",(0,l.kt)("a",{parentName:"p",href:"https://pub.dev/packages/audioplayers"},"audioplayers")," Flutter widget."),(0,l.kt)("p",null,"Audio control is non-visual and should be added to ",(0,l.kt)("inlineCode",{parentName:"p"},"page.overlay")," list."),(0,l.kt)("h2",{id:"examples"},"Examples"),(0,l.kt)("h3",{id:"autoplay-audio"},"Autoplay audio"),(0,l.kt)(i.Z,{groupId:"language",mdxType:"Tabs"},(0,l.kt)(r.Z,{value:"python",label:"Python",default:!0,mdxType:"TabItem"},(0,l.kt)("admonition",{type:"note"},(0,l.kt)("p",{parentName:"admonition"},"Autoplay works in desktop, mobile apps and Safari browser, but doesn't work in Chrome/Edge.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'import flet as ft\n\ndef main(page: ft.Page):\n    audio1 = ft.Audio(\n        src="https://luan.xyz/files/audio/ambient_c_motion.mp3", autoplay=True\n    )\n    page.overlay.append(audio1)\n    page.add(\n        ft.Text("This is an app with background audio."),\n        ft.ElevatedButton("Stop playing", on_click=lambda _: audio1.pause()),\n    )\n\nft.app(target=main)\n')))),(0,l.kt)("h3",{id:"audio-with-playback-controls"},"Audio with playback controls"),(0,l.kt)(i.Z,{groupId:"language",mdxType:"Tabs"},(0,l.kt)(r.Z,{value:"python",label:"Python",default:!0,mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'import flet as ft\n\nurl = "https://github.com/mdn/webaudio-examples/blob/main/audio-analyser/viper.mp3?raw=true"\n\ndef main(page: ft.Page):\n    def volume_down(_):\n        audio1.volume -= 0.1\n        audio1.update()\n\n    def volume_up(_):\n        audio1.volume += 0.1\n        audio1.update()\n\n    def balance_left(_):\n        audio1.balance -= 0.1\n        audio1.update()\n\n    def balance_right(_):\n        audio1.balance += 0.1\n        audio1.update()\n\n    audio1 = ft.Audio(\n        src=url,\n        autoplay=False,\n        volume=1,\n        balance=0,\n        on_loaded=lambda _: print("Loaded"),\n        on_duration_changed=lambda e: print("Duration changed:", e.data),\n        on_position_changed=lambda e: print("Position changed:", e.data),\n        on_state_changed=lambda e: print("State changed:", e.data),\n        on_seek_complete=lambda _: print("Seek complete"),\n    )\n    page.overlay.append(audio1)\n    page.add(\n        ft.ElevatedButton("Play", on_click=lambda _: audio1.play()),\n        ft.ElevatedButton("Pause", on_click=lambda _: audio1.pause()),\n        ft.ElevatedButton("Resume", on_click=lambda _: audio1.resume()),\n        ft.ElevatedButton("Release", on_click=lambda _: audio1.release()),\n        ft.ElevatedButton("Seek 2s", on_click=lambda _: audio1.seek(2000)),\n        ft.Row(\n            [\n                ft.ElevatedButton("Volume down", on_click=volume_down),\n                ft.ElevatedButton("Volume up", on_click=volume_up),\n            ]\n        ),\n        ft.Row(\n            [\n                ft.ElevatedButton("Balance left", on_click=balance_left),\n                ft.ElevatedButton("Balance right", on_click=balance_right),\n            ]\n        ),\n        ft.ElevatedButton(\n            "Get duration", on_click=lambda _: print("Duration:", audio1.get_duration())\n        ),\n        ft.ElevatedButton(\n            "Get current position",\n            on_click=lambda _: print("Current position:", audio1.get_duration()),\n        ),\n    )\n\nft.app(target=main)\n')))),(0,l.kt)("h2",{id:"properties"},"Properties"),(0,l.kt)("h3",{id:"autoplay"},(0,l.kt)("inlineCode",{parentName:"h3"},"autoplay")),(0,l.kt)("p",null,"Starts playing audio as soon as audio control is added to a page."),(0,l.kt)("admonition",{type:"note"},(0,l.kt)("p",{parentName:"admonition"},"Autoplay works in desktop, mobile apps and Safari browser, but doesn't work in Chrome/Edge.")),(0,l.kt)("h3",{id:"balance"},(0,l.kt)("inlineCode",{parentName:"h3"},"balance")),(0,l.kt)("p",null,"Sets the stereo balance."),(0,l.kt)("p",null,"-1 - The left channel is at full volume; the right channel is silent. 1 - The right channel is at full volume; the left channel is silent. 0 - Both channels are at the same volume."),(0,l.kt)("admonition",{type:"note"},(0,l.kt)("p",{parentName:"admonition"},"Setting balance is supported on Windows and Linux only.")),(0,l.kt)("h3",{id:"get_current_position"},(0,l.kt)("inlineCode",{parentName:"h3"},"get_current_position()")),(0,l.kt)("p",null,"Returns the current position in milliseconds."),(0,l.kt)("h3",{id:"get_duration"},(0,l.kt)("inlineCode",{parentName:"h3"},"get_duration()")),(0,l.kt)("p",null,"Returns the duration of audio in milliseconds."),(0,l.kt)("h3",{id:"playback_rate"},(0,l.kt)("inlineCode",{parentName:"h3"},"playback_rate")),(0,l.kt)("p",null,"Sets the playback rate. iOS and macOS have limits between 0.5 and 2x Android SDK version should be 23 or higher."),(0,l.kt)("h3",{id:"release_mode"},(0,l.kt)("inlineCode",{parentName:"h3"},"release_mode")),(0,l.kt)("p",null,"Sets the release mode. The following values are supported:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"ReleaseMode.RELEASE")," (default) - Releases all resources, just like calling ",(0,l.kt)("inlineCode",{parentName:"li"},"release()")," method. In Android, the media player is quite resource-intensive, and this will let it go. Data will be buffered again when needed (if it's a remote file, it will be downloaded again). In iOS and macOS, works just like ",(0,l.kt)("inlineCode",{parentName:"li"},"stop()")," method."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"ReleaseMode.LOOP")," - Keeps buffered data and plays again after completion, creating a loop. Notice that calling stop method is not enough to release the resources when this mode is being used."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"ReleaseMode.STOP")," - Stops audio playback but keep all resources intact. Use this if you intend to play again later.")),(0,l.kt)("h3",{id:"src"},(0,l.kt)("inlineCode",{parentName:"h3"},"src")),(0,l.kt)("p",null,"Sets the URL to the audio file. It could be an asset URL, see ",(0,l.kt)("a",{parentName:"p",href:"/docs/controls/image#src"},"Image.src")," for more information about assets."),(0,l.kt)("h3",{id:"src_base64"},(0,l.kt)("inlineCode",{parentName:"h3"},"src_base64")),(0,l.kt)("p",null,"Sets the contents of audio file encoded in base-64 format."),(0,l.kt)("h2",{id:"methods"},"Methods"),(0,l.kt)("h3",{id:"pause"},(0,l.kt)("inlineCode",{parentName:"h3"},"pause()")),(0,l.kt)("p",null,"Stops playing audio."),(0,l.kt)("h3",{id:"play"},(0,l.kt)("inlineCode",{parentName:"h3"},"play()")),(0,l.kt)("p",null,"Starts playing audio for the beginning."),(0,l.kt)("h3",{id:"release"},(0,l.kt)("inlineCode",{parentName:"h3"},"release()")),(0,l.kt)("p",null,"Stops playing and releases the resources associated with this audio control.\nThe resources are going to be fetched or buffered again as soon as you call ",(0,l.kt)("inlineCode",{parentName:"p"},"resume()")," or change the source."),(0,l.kt)("h3",{id:"resume"},(0,l.kt)("inlineCode",{parentName:"h3"},"resume()")),(0,l.kt)("p",null,"Resumes playing audio from the current position."),(0,l.kt)("h3",{id:"seek"},(0,l.kt)("inlineCode",{parentName:"h3"},"seek()")),(0,l.kt)("p",null,"Moves the cursor to the desired position."),(0,l.kt)("p",null,"Method arguments:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"position_milliseconds")," - desired position in milliseconds.")),(0,l.kt)("h3",{id:"volume"},(0,l.kt)("inlineCode",{parentName:"h3"},"volume")),(0,l.kt)("p",null,"Sets the volume (amplitude)."),(0,l.kt)("p",null,"0 is mute and 1 is the max volume. The values between 0 and 1 are linearly interpolated."),(0,l.kt)("h2",{id:"events"},"Events"),(0,l.kt)("h3",{id:"on_duration_changed"},(0,l.kt)("inlineCode",{parentName:"h3"},"on_duration_changed")),(0,l.kt)("p",null,"Fires as soon as audio duration is available (it might take a while to download or buffer it)."),(0,l.kt)("p",null,"Event's ",(0,l.kt)("inlineCode",{parentName:"p"},"e.data")," contains audio duration in milliseconds."),(0,l.kt)("h3",{id:"on_loaded"},(0,l.kt)("inlineCode",{parentName:"h3"},"on_loaded")),(0,l.kt)("p",null,"Fires when an audio is loaded/buffered."),(0,l.kt)("h3",{id:"on_position_changed"},(0,l.kt)("inlineCode",{parentName:"h3"},"on_position_changed")),(0,l.kt)("p",null,"Fires when audio position is changed. Will continuously update the position of the playback every 1 second if the status is playing. Can be used for a progress bar."),(0,l.kt)("h3",{id:"on_seek_complete"},(0,l.kt)("inlineCode",{parentName:"h3"},"on_seek_complete")),(0,l.kt)("p",null,"Fires on seek completions. An event is going to be sent as soon as the audio seek is finished."),(0,l.kt)("h3",{id:"on_state_changed"},(0,l.kt)("inlineCode",{parentName:"h3"},"on_state_changed")),(0,l.kt)("p",null,"Fires when audio player state changes. Event's ",(0,l.kt)("inlineCode",{parentName:"p"},"e.data")," contains one of the following states:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"stopped")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"playing")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"paused")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"completed"))))}h.isMDXComponent=!0}}]);
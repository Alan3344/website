"use strict";(self.webpackChunkflet_dev=self.webpackChunkflet_dev||[]).push([[2131],{3905:function(e,n,t){t.d(n,{Zo:function(){return g},kt:function(){return f}});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function d(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=r.createContext({}),c=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},g=function(e){var n=c(e.components);return r.createElement(l.Provider,{value:n},e.children)},p="mdxType",s={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},u=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,g=d(e,["components","mdxType","originalType","parentName"]),p=c(t),u=a,f=p["".concat(l,".").concat(u)]||p[u]||s[u]||o;return t?r.createElement(f,i(i({ref:n},g),{},{components:t})):r.createElement(f,i({ref:n},g))}));function f(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,i=new Array(o);i[0]=u;var d={};for(var l in n)hasOwnProperty.call(n,l)&&(d[l]=n[l]);d.originalType=e,d[p]="string"==typeof e?e:a,i[1]=d;for(var c=2;c<o;c++)i[c]=t[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}u.displayName="MDXCreateElement"},79:function(e,n,t){t.r(n),t.d(n,{assets:function(){return g},contentTitle:function(){return l},default:function(){return u},frontMatter:function(){return d},metadata:function(){return c},toc:function(){return p}});var r=t(7462),a=t(3366),o=(t(7294),t(3905)),i=["components"],d={title:"Drag and drop",sidebar_label:"Drag and drop"},l=void 0,c={unversionedId:"guides/python/drag-and-drop",id:"guides/python/drag-and-drop",title:"Drag and drop",description:'The mechanics of drag-and-drop in Flet is pretty simple - a user starts dragging Draggable control and "drops" it on DragTarget. If both draggable and drag target has the same group a drag target will call on_accept event handler and pass draggable control ID as event data. In this case draggable serves as a source "data" for drag-and-drop operation.',source:"@site/docs/guides/python/drag-and-drop.md",sourceDirName:"guides/python",slug:"/guides/python/drag-and-drop",permalink:"/docs/guides/python/drag-and-drop",draft:!1,editUrl:"https://github.com/flet-dev/website/edit/main/docs/guides/python/drag-and-drop.md",tags:[],version:"current",frontMatter:{title:"Drag and drop",sidebar_label:"Drag and drop"},sidebar:"docs",previous:{title:"Large lists",permalink:"/docs/guides/python/large-lists"},next:{title:"Navigation and routing",permalink:"/docs/guides/python/navigation-and-routing"}},g={},p=[],s={toc:p};function u(e){var n=e.components,t=(0,a.Z)(e,i);return(0,o.kt)("wrapper",(0,r.Z)({},s,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"The mechanics of drag-and-drop in Flet is pretty simple - a user starts dragging ",(0,o.kt)("a",{parentName:"p",href:"/docs/controls/draggable"},(0,o.kt)("inlineCode",{parentName:"a"},"Draggable")),' control and "drops" it on ',(0,o.kt)("a",{parentName:"p",href:"/docs/controls/dragtarget"},(0,o.kt)("inlineCode",{parentName:"a"},"DragTarget")),". If both draggable and drag target has the same ",(0,o.kt)("inlineCode",{parentName:"p"},"group")," a drag target will call ",(0,o.kt)("inlineCode",{parentName:"p"},"on_accept"),' event handler and pass draggable control ID as event data. In this case draggable serves as a source "data" for drag-and-drop operation.'),(0,o.kt)("p",null,'Let\'s take a look at the following example. In the program below you can drag left control displaying "1" on top of the right control displaying "0" and when drag operation completes left control is replaced with "0" and the right control becomes "1":'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'import flet as ft\n\ndef main(page: ft.Page):\n    page.title = "Drag and Drop example"\n\n    def drag_accept(e):\n        # get draggable (source) control by its ID\n        src = page.get_control(e.src_id)\n        # update text inside draggable control\n        src.content.content.value = "0"\n        # update text inside drag target control\n        e.control.content.content.value = "1"\n        page.update()\n\n    page.add(\n        ft.Row(\n            [\n                ft.Draggable(\n                    group="number",\n                    content=ft.Container(\n                        width=50,\n                        height=50,\n                        bgcolor=ft.colors.CYAN_200,\n                        border_radius=5,\n                        content=ft.Text("1", size=20),\n                        alignment=ft.alignment.center,\n                    ),\n                ),\n                ft.Container(width=100),\n                ft.DragTarget(\n                    group="number",\n                    content=ft.Container(\n                        width=50,\n                        height=50,\n                        bgcolor=ft.colors.PINK_200,\n                        border_radius=5,\n                        content=ft.Text("0", size=20),\n                        alignment=ft.alignment.center,\n                    ),\n                    on_accept=drag_accept,\n                ),\n            ]\n        )\n    )\n\nft.app(target=main)\n')),(0,o.kt)("img",{src:"/img/docs/getting-started/drag-and-drop-number.gif",className:"screenshot-50"}),(0,o.kt)("p",null,'So, it\'s developer\'s responsibility to determine what happens with "source" (draggable) and "destination" (drag target) controls when ',(0,o.kt)("inlineCode",{parentName:"p"},"on_accept")," event occurs."),(0,o.kt)("admonition",{title:"Try something",type:"note"},(0,o.kt)("p",{parentName:"admonition"},"Change DragTarget's group property to ",(0,o.kt)("inlineCode",{parentName:"p"},"number1")," and note ",(0,o.kt)("inlineCode",{parentName:"p"},"on_accept"),' is not called any more when you drop "1" on the target.')),(0,o.kt)("p",null,"There are additional properties and event handlers to make drag-and-drop operation even more interactive. For example, draggable has ",(0,o.kt)("inlineCode",{parentName:"p"},"content_when_dragging")," property to display a different control instead of ",(0,o.kt)("inlineCode",{parentName:"p"},"content")," when drag operation is under way. There is also ",(0,o.kt)("inlineCode",{parentName:"p"},"content_feedback")," property to show a different control under the pointer. By default, the same ",(0,o.kt)("inlineCode",{parentName:"p"},"content")," control, but with 50% opacity is displayed under cursor when dragging."),(0,o.kt)("p",null,'Let\'s modify Draggable in our example to display a "hole" in place of dragged control and just "1" under cursor while dragging:'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'...\n                ft.Draggable(\n                    group="number",\n                    content=ft.Container(\n                        width=50,\n                        height=50,\n                        bgcolor=ft.colors.CYAN_200,\n                        border_radius=5,\n                        content=ft.Text("1", size=20),\n                        alignment=ft.alignment.center,\n                    ),\n                    content_when_dragging=ft.Container(\n                        width=50,\n                        height=50,\n                        bgcolor=ft.colors.BLUE_GREY_200,\n                        border_radius=5,\n                    ),\n                    content_feedback=ft.Text("1"),\n                ),\n...\n')),(0,o.kt)("img",{src:"/img/docs/getting-started/drag-and-drop-number-2.gif",className:"screenshot-50"}),(0,o.kt)("p",null,"Drag target control additionally has ",(0,o.kt)("inlineCode",{parentName:"p"},"on_will_accept")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"on_leave")," event handlers which help better visualize when it's a good time to \"drop\" something on the target. Let's modify DragTarget in our example to draw a border around target control when it's ready to accept incoming drag:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'import flet as ft\n\ndef main(page: ft.Page):\n    page.title = "Drag and Drop example 2"\n\n    def drag_accept(e):\n        # get draggable (source) control by its ID\n        src = page.get_control(e.src_id)\n        # update text inside draggable control\n        src.content.content.value = "0"\n        # reset source group, so it cannot be dropped to a target anymore\n        src.group = ""\n        # update text inside drag target control\n        e.control.content.content.value = "1"\n        # reset border\n        e.control.content.border = None\n        page.update()\n\n    def drag_will_accept(e):\n        # black border when it\'s allowed to drop and red when it\'s not\n        e.control.content.border = ft.border.all(\n            2, ft.colors.BLACK45 if e.data == "true" else ft.colors.RED\n        )\n        e.control.update()\n\n    def drag_leave(e):\n        e.control.content.border = None\n        e.control.update()\n\n    page.add(\n        ft.Row(\n            [\n                ft.Draggable(\n                    group="number",\n                    content=ft.Container(\n                        width=50,\n                        height=50,\n                        bgcolor=ft.colors.CYAN_200,\n                        border_radius=5,\n                        content=ft.Text("1", size=20),\n                        alignment=ft.alignment.center,\n                    ),\n                    content_when_dragging=ft.Container(\n                        width=50,\n                        height=50,\n                        bgcolor=ft.colors.BLUE_GREY_200,\n                        border_radius=5,\n                    ),\n                    content_feedback=ft.Text("1"),\n                ),\n                ft.Container(width=100),\n                ft.DragTarget(\n                    group="number",\n                    content=ft.Container(\n                        width=50,\n                        height=50,\n                        bgcolor=ft.colors.PINK_200,\n                        border_radius=5,\n                        content=ft.Text("0", size=20),\n                        alignment=ft.alignment.center,\n                    ),\n                    on_accept=drag_accept,\n                    on_will_accept=drag_will_accept,\n                    on_leave=drag_leave,\n                ),\n            ]\n        )\n    )\n\nft.app(target=main)\n')),(0,o.kt)("img",{src:"/img/docs/getting-started/drag-and-drop-number-3.gif",className:"screenshot-50"}))}u.isMDXComponent=!0}}]);
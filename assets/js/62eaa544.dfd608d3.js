"use strict";(self.webpackChunkflet_dev=self.webpackChunkflet_dev||[]).push([[2957],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return k}});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=a.createContext({}),s=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=s(e.components);return a.createElement(l.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),c=s(n),m=o,k=c["".concat(l,".").concat(m)]||c[m]||d[m]||r;return n?a.createElement(k,i(i({ref:t},u),{},{components:n})):a.createElement(k,i({ref:t},u))}));function k(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=m;var p={};for(var l in t)hasOwnProperty.call(t,l)&&(p[l]=t[l]);p.originalType=e,p[c]="string"==typeof e?e:o,i[1]=p;for(var s=2;s<r;s++)i[s]=n[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},1422:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return l},default:function(){return m},frontMatter:function(){return p},metadata:function(){return s},toc:function(){return c}});var a=n(7462),o=n(3366),r=(n(7294),n(3905)),i=["components"],p={title:"Packaging desktop app",sidebar_label:"Packaging desktop app"},l=void 0,s={unversionedId:"guides/python/packaging-desktop-app",id:"guides/python/packaging-desktop-app",title:"Packaging desktop app",description:"Flet Python app and all its dependencies can be packaged into an executable and user can run it on their computer without installing a Python interpreter or any modules.",source:"@site/docs/guides/python/packaging-desktop-app.md",sourceDirName:"guides/python",slug:"/guides/python/packaging-desktop-app",permalink:"/docs/guides/python/packaging-desktop-app",draft:!1,editUrl:"https://github.com/flet-dev/website/edit/main/docs/guides/python/packaging-desktop-app.md",tags:[],version:"current",frontMatter:{title:"Packaging desktop app",sidebar_label:"Packaging desktop app"},sidebar:"docs",previous:{title:"Hot reload",permalink:"/docs/guides/python/hot-reload"},next:{title:"Publishing static website",permalink:"/docs/guides/python/publishing-static-website"}},u={},c=[{value:"Customizing package icon",id:"customizing-package-icon",level:2},{value:"Packaging assets",id:"packaging-assets",level:2},{value:"Customizing macOS bundle",id:"customizing-macos-bundle",level:2},{value:"Customizing Windows executable metadata",id:"customizing-windows-executable-metadata",level:2},{value:"Using CI for multi-platform packaging",id:"using-ci-for-multi-platform-packaging",level:2}],d={toc:c};function m(e){var t=e.components,n=(0,o.Z)(e,i);return(0,r.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Flet Python app and all its dependencies can be packaged into an executable and user can run it on their computer without installing a Python interpreter or any modules."),(0,r.kt)("p",null,"Flet wraps ",(0,r.kt)("a",{parentName:"p",href:"https://pyinstaller.org/en/stable/index.html"},"PyInstaller")," API to package Flet Python app and all its dependencies into a single package for Windows, macOS and Linux. To create Windows package, PyInstaller must be run on Windows; to build Linux app, it must be run on Linux; and to build macOS app - on macOS."),(0,r.kt)("p",null,"Start from installing PyInstaller:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"pip install pyinstaller\n")),(0,r.kt)("p",null,"Navigate to the directory where your ",(0,r.kt)("inlineCode",{parentName:"p"},".py")," file is located and build your app with the following command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"flet pack your_program.py\n")),(0,r.kt)("p",null,"Your bundled Flet app should now be available in ",(0,r.kt)("inlineCode",{parentName:"p"},"dist")," folder. Try running the program to see if it works."),(0,r.kt)("p",null,"On macOS:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"open dist/your_program.app\n")),(0,r.kt)("p",null,"on Windows:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"dist\\your_program.exe\n")),(0,r.kt)("p",null,"on Linux:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"dist/your_program\n")),(0,r.kt)("p",null,"Now you can just zip the contents of ",(0,r.kt)("inlineCode",{parentName:"p"},"dist")," folder and distribute to your users! They don't need Python or Flet installed to run your packaged program - what a great alternative to Electron!"),(0,r.kt)("p",null,"By default, an executable/bundle has the same name as a Python script. You can change it with ",(0,r.kt)("inlineCode",{parentName:"p"},"--name")," argument:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"flet pack your_program.py --name bundle_name\n")),(0,r.kt)("h2",{id:"customizing-package-icon"},"Customizing package icon"),(0,r.kt)("p",null,"Default bundle app icon is diskette which might be confusing for younger developers missed those ancient times when ",(0,r.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Floppy_disk"},"floppy disks")," were used to store computer data."),(0,r.kt)("p",null,"You can replace the icon with your own by adding ",(0,r.kt)("inlineCode",{parentName:"p"},"--icon")," argument:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"flet pack your_program.py --icon <your-image.png>\n")),(0,r.kt)("p",null,"PyInstaller will convert provided PNG to a platform specific format (",(0,r.kt)("inlineCode",{parentName:"p"},".ico")," for Windows and ",(0,r.kt)("inlineCode",{parentName:"p"},".icns")," for macOS), but you need to install ",(0,r.kt)("a",{parentName:"p",href:"https://pillow.readthedocs.io/en/stable/"},"Pillow")," module for that:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"pip install pillow\n")),(0,r.kt)("h2",{id:"packaging-assets"},"Packaging assets"),(0,r.kt)("p",null,"Your Flet app can include ",(0,r.kt)("a",{parentName:"p",href:"/docs/controls/image#src"},"assets"),". Provided app assets are in ",(0,r.kt)("inlineCode",{parentName:"p"},"assets")," folder next to ",(0,r.kt)("inlineCode",{parentName:"p"},"your_program.py")," they can be added to an application package with ",(0,r.kt)("inlineCode",{parentName:"p"},"--add-data")," argument, on macOS/Linux:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'flet pack your_program.py --add-data "assets:assets"\n')),(0,r.kt)("p",null,"On Windows ",(0,r.kt)("inlineCode",{parentName:"p"},"assets;assets")," must be delimited with ",(0,r.kt)("inlineCode",{parentName:"p"},";"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'flet pack your_program.py --add-data "assets;assets"\n')),(0,r.kt)("h2",{id:"customizing-macos-bundle"},"Customizing macOS bundle"),(0,r.kt)("p",null,"macOS bundle details can be customized with the following ",(0,r.kt)("inlineCode",{parentName:"p"},"flet pack")," macOS-specific arguments:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"--product-name")," - display name of macOS bundle, shown in Dock, Activity Monitor, About dialog."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"--product-version"),' - bundle version shown in "About" dialog.'),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"--copyright"),' - copyright notice shown in "About" dialog.'),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"--bundle-id")," unique bundle ID.")),(0,r.kt)("img",{src:"/img/docs/getting-started/package-desktop/flet-app-bundle-about.png",className:"screenshot-50"}),(0,r.kt)("h2",{id:"customizing-windows-executable-metadata"},"Customizing Windows executable metadata"),(0,r.kt)("p",null,'Windows executable "Details" properties dialog can be customized with the following ',(0,r.kt)("inlineCode",{parentName:"p"},"flet pack")," arguments:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"--product-name"),' - "Product name" field.'),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"--product-version"),' - "Product version" field.'),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"--file-version"),' - "File version" field.'),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"--file-description"),' - "File description" field, also program display name in Task Manager.'),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"--copyright"),' - "Copyright" field.')),(0,r.kt)("h2",{id:"using-ci-for-multi-platform-packaging"},"Using CI for multi-platform packaging"),(0,r.kt)("p",null,"To create an app package with PyInstaller for specific OS it must be run on that OS."),(0,r.kt)("p",null,"If you don't have an access to Mac or PC you can bundle your app for all three platforms with ",(0,r.kt)("a",{parentName:"p",href:"https://www.appveyor.com"},"AppVeyor")," - Continuous Integration service for Windows, Linux and macOS. In short, Continuous Integration (CI) is an automated process of building, testing and deploying (Continuous Delivery - CD) application on every push to a repository."),(0,r.kt)("p",null,"AppVeyor is free for open source projects hosted on GitHub, GitLab and Bitbucket. To use AppVeyor, push your app to a repository within one of those source-control providers."),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"AppVeyor is the company behind Flet.")),(0,r.kt)("p",null,"To get started with AppVeyor ",(0,r.kt)("a",{parentName:"p",href:"https://ci.appveyor.com/signup"},"sign up for a free account"),"."),(0,r.kt)("p",null,'Click "New project" button, authorize AppVeyor to access your GitHub, GitLab or Bitbucket account, choose a repository with your program and create a new project.'),(0,r.kt)("p",null,"Now, to configure packaging of your app for Windows, Linux and macOS, add file with ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/flet-dev/python-ci-example/blob/main/appveyor.yml"},"the following contents")," into the root of your repository ",(0,r.kt)("inlineCode",{parentName:"p"},"appveyor.yml"),". ",(0,r.kt)("inlineCode",{parentName:"p"},"appveyor.yml")," is a build configuration file, or CI workflow, describing build, test, packaging and deploy commands that must be run on every commit."),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"You can just fork ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/flet-dev/python-ci-example"},"flet-dev/python-ci-example")," repository and customize it to your needs.")),(0,r.kt)("p",null,"When you push any changes to GitHub repository, AppVeyor will automatically start a new build:"),(0,r.kt)("img",{src:"/img/docs/getting-started/appveyor-ci-flet-python-project.png",className:"screenshot-70"}),(0,r.kt)("p",null,"What that ",(0,r.kt)("a",{parentName:"p",href:"https://ci.appveyor.com/project/flet-dev/python-ci-example"},"CI workflow")," does on every push to the repository:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Clones the repository to a clean virtual machine."),(0,r.kt)("li",{parentName:"ul"},"Installs app dependencies using ",(0,r.kt)("inlineCode",{parentName:"li"},"pip"),"."),(0,r.kt)("li",{parentName:"ul"},"Runs ",(0,r.kt)("inlineCode",{parentName:"li"},"flet pack")," to package Python app into a bundle for ",(0,r.kt)("strong",{parentName:"li"},"Windows"),", ",(0,r.kt)("strong",{parentName:"li"},"macOS")," and ",(0,r.kt)("strong",{parentName:"li"},"Ubuntu"),"."),(0,r.kt)("li",{parentName:"ul"},"Zip/Tar app bundles and uploads them to ",(0,r.kt)("a",{parentName:"li",href:"https://ci.appveyor.com/project/flet-dev/python-ci-example/build/job/g2j2lhstv04eyxcm/artifacts"},'"Artifacts"'),"."),(0,r.kt)("li",{parentName:"ul"},"Uploads app bundles to ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/flet-dev/python-ci-example/releases"},(0,r.kt)("strong",{parentName:"a"},"GitHub releases"))," when a new tag is pushed. Just push a new tag to make a release!")),(0,r.kt)("admonition",{title:"GITHUB_TOKEN",type:"note"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("inlineCode",{parentName:"p"},"GITHUB_TOKEN")," in ",(0,r.kt)("inlineCode",{parentName:"p"},"appveyor.yml"),' is a GitHub Personal Access Token (PAT) used by AppVeyor to publish created packages to repository "Releases". You need to generate your own token and replace it in ',(0,r.kt)("inlineCode",{parentName:"p"},"appveyor.yml"),". Login to your GitHub account and navigate to ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/settings/tokens"},"Personal access token"),' page. Click "Generate new token" and select "public_repo" or "repo" scope for public or private repository respectively. Copy generated token to a clipboard and return to AppVeyor Portal. Navigate to ',(0,r.kt)("a",{parentName:"p",href:"https://ci.appveyor.com/tools/encrypt"},"Encrypt configuration data"),' page and paste token to "Value to encrypt" field, click "Encrypt" button. Put encrypted value under ',(0,r.kt)("inlineCode",{parentName:"p"},"GITHUB_TOKEN")," in your ",(0,r.kt)("inlineCode",{parentName:"p"},"appveyor.yml"),".")),(0,r.kt)("p",null,'Configure AppVeyor for your Python project, push a new tag to a repository and "automagically" get desktop bundle for all three platforms in GitHub releases! \ud83c\udf89'),(0,r.kt)("img",{src:"/img/docs/getting-started/appveyor-ci-flet-github-releases.png",className:"screenshot-70"}),(0,r.kt)("p",null,"In addition to ",(0,r.kt)("a",{parentName:"p",href:"https://www.appveyor.com/docs/deployment/github/"},"GitHub Releases"),", you can also configure releasing of artifacts to ",(0,r.kt)("a",{parentName:"p",href:"https://www.appveyor.com/docs/deployment/amazon-s3/"},"Amazon S3 bucket")," or ",(0,r.kt)("a",{parentName:"p",href:"https://www.appveyor.com/docs/deployment/azure-blob/"},"Azure Blob storage"),"."))}m.isMDXComponent=!0}}]);